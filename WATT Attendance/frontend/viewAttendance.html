<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>View Attendance</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>

<body>
  <div class="container mt-2">
    <h2 id="classTitle" class="mb-3">Attendance</h2>

    <!-- Attendance Table -->
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead class="table-dark">
          <tr>
            <th>Device ID</th>
            <th>Student ID</th>
            <th>Student Name</th>
            <th>Class</th>
            <th>Section</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody id="attendanceTable">
          <!-- Rows will load here -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Example Attendance Data
    let attendanceData = [
      { deviceId: "D001", id: "S101", name: "Amit Sharma", class: "5", section: "A", status: "Present", date: "2025-09-17" },
      { deviceId: "D001", id: "S102", name: "Riya Verma", class: "5", section: "A", status: "Absent", date: "2025-09-17" },
      { deviceId: "D002", id: "S103", name: "Kunal Singh", class: "6", section: "B", status: "Late", date: "2025-09-17" },
      { deviceId: "D003", id: "S104", name: "Priya Yadav", class: "5", section: "B", status: "Present", date: "2025-09-17" },
      { deviceId: "D002", id: "S105", name: "Rahul Mehta", class: "6", section: "A", status: "Present", date: "2025-09-17" }
    ];

    // Get class from query parameter
    const urlParams = new URLSearchParams(window.location.search);
    const selectedClass = urlParams.get('class');

    // Update Title
    document.getElementById('classTitle').innerText = Attendance - Class ${selectedClass};

    // Filter and render Attendance
    function renderAttendance() {
      const tbody = document.getElementById("attendanceTable");
      tbody.innerHTML = "";

      const filtered = attendanceData.filter(a => a.class === selectedClass);

      if (filtered.length === 0) {
        tbody.innerHTML = <tr><td colspan="7" class="text-center text-muted">No records found</td></tr>;
        return;
      }

      filtered.forEach(a => {
        tbody.innerHTML += `
          <tr>
            <td>${a.deviceId}</td>
            <td>${a.id}</td>
            <td>${a.name}</td>
            <td>${a.class}</td>
            <td>${a.section}</td>
            <td>${a.status}</td>
            <td>${a.date}</td>
          </tr>
        `;
      });
    }

    renderAttendance();
  </script>
</body>
</html>
